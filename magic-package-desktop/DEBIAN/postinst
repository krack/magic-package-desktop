#!/bin/bash
#install skype manualy for bypass repository dependency
apt-get install skype

#configure programm for star with session
function run_at_computer_start(){
	local program_name=$1
	
	#for each user
	for d in $( ls /home/); do
		mkdir -p /home/$d/.config/autostart/
		cp /usr/share/applications/$program_name.desktop /home/$d/.config/autostart/
	done

	echo "Configuration for $program_name start at session start"
	
}

#add skype at startup
run_at_computer_start skype
#add thunderbird at startup
run_at_computer_start thunderbird

#install firefox extention
#ad block plus
mozilla-extension-manager --install --global https://addons.mozilla.org/firefox/downloads/latest/adblock-plus/addon-1865-latest.xpi

#install firefox extention
#Fire tray
mozilla-extension-manager --install --global https://addons.mozilla.org/thunderbird/downloads/latest/firetray/platform:2/addon-4868-latest.xpi

#configure remote desktop for each user
for login in $( ls /home/); do
	echo "configure magic-package-remote-help for $login"
	mkdir -p /home/$login/.config/autostart/
	cat <<EOF > /home/$login/.config/autostart/magic-package-remote-help-configure.desktop
[Desktop Entry]
Type=Application
Exec=magic-package-desktop-configure
Name=magic-package-desktop-configure
Icon=magic-package-desktop-configure
Comment=Configure magic-package-desktop at start
EOF
done

echo "install done"



